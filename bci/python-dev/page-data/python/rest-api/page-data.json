{"componentChunkName":"component---src-templates-blog-js","path":"/python/rest-api","result":{"data":{"mdx":{"frontmatter":{"title":"Rest-API","date":"2019"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Rest-API\",\n  \"date\": \"2019\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"sales-dashboard\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#sales-dashboard\",\n    \"aria-label\": \"sales dashboard permalink\",\n    \"className\": \"icon-heading-class before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Sales Dashboard\"), mdx(\"p\", null, \"Built Rest-API using Flask, to structure Complex Nested Json, then later sent to browser as part of Sales Dashboard app. \"), mdx(\"h3\", {\n    \"id\": \"a-tree-view--tree-view\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#a-tree-view--tree-view\",\n    \"aria-label\": \"a tree view  tree view permalink\",\n    \"className\": \"icon-heading-class before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"A. Tree View ::: Tree View\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Sales Dashboard must be \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Filterable\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Sales data can be drilled \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"top-down\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Nested JSON was prepared in Python Flask\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Scroll-lag showed in Tree View\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Solved by applying \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/cheton/infinite-tree\"\n  }), \"Infinite Scroll\"))))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../.img/mor3.png\",\n    \"alt\": \"Three-Level Nested Json\"\n  }))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../.img/mor2.png\",\n    \"alt\": \"Filter process through Rest-API rather on Client\"\n  }))), mdx(\"h3\", {\n    \"id\": \"b-map-markers--map-markers\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#b-map-markers--map-markers\",\n    \"aria-label\": \"b map markers  map markers permalink\",\n    \"className\": \"icon-heading-class before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"B. Map Markers ::: Map Markers\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Sales Marker was provided by Rest-API\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Sales Marker must contained product details\")), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../.img/mor4.png\",\n    \"alt\": \"Nested Markers Data\"\n  }))), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../.img/mor1.png\",\n    \"alt\": \"Map Markers Data received from Rest-API\"\n  }))), mdx(\"h2\", {\n    \"id\": \"technical\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#technical\",\n    \"aria-label\": \"technical permalink\",\n    \"className\": \"icon-heading-class before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Technical\"), mdx(\"h3\", {\n    \"id\": \"complex-sql-query\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#complex-sql-query\",\n    \"aria-label\": \"complex sql query permalink\",\n    \"className\": \"icon-heading-class before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Complex SQL Query\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-sql\"\n  }), \"WITH mor AS (\\n  SELECT\\n    mor_sk,\\n    mor_short\\n  FROM dwh.d_mor\\n  WHERE\\n    is_active = TRUE\\n),\\nprov AS (\\n  SELECT\\n    region_sk,\\n    region_name\\n  FROM dwh.d_all_region\\n  WHERE\\n    region_is_active = TRUE\\n),\\ndist AS (\\n  SELECT\\n    d.district_sk,\\n    d.district_name\\n  FROM dwh.d_all_district d\\n  WHERE\\n    d.district_isactive = TRUE\\n),\\ncust AS (\\n  select\\n    avi_customer_group_sk,\\n    avi_customer_group\\n  from dwh.d_avi_customer_group\\n),\\nplant AS (\\n  SELECT\\n    plant_sk,\\n    plant_id,\\n    plant_name,\\n    longitude AS lng,\\n    latitude AS lat,\\n    address,\\n    phone,\\n    region_sk,\\n    mor_sk\\n  FROM dwh.d_all_plant\\n),\\nmtrl AS (\\n  SELECT\\n    material_sk,\\n    material_id,\\n    material_name\\n  FROM dwh.d_all_material\\n),\\nmain AS (\\n  SELECT\\n    MIN(mor_sk) AS mor_sk,\\n    MIN(region_sk) AS region_sk,\\n    MIN(district_sk) AS district_sk,\\n    plant_sk AS plant_sk,\\n    m.material_sk AS material_sk,\\n    COALESCE(SUM(daily_quantity), 0) AS d_sale,\\n    COALESCE(SUM(last_year_daily_quantity), 0) AS d_targ\\n  FROM data_set.ds_map_daily_avi m\\n  LEFT JOIN cust ON cust.avi_customer_group_sk = m.avi_customer_group_sk --\\n    -- /*\\n  WHERE\\n    -- and plant_sk = 1\\n    period_sk >= 20181001\\n    and period_sk <= 20181011\\n    and material_sk = 319 --\\n    -- */\\n    -- {MAIN_FILTER}\\n  GROUP BY\\n    plant_sk,\\n    m.material_sk --\\n    -- {LIMIT_TEXT}\\n    -- /*\\n  FETCH FIRST\\n    10 ROWS ONLY --\\n    -- */\\n),\\nfmain AS (\\n  select\\n    'dppu' AS plant_type,\\n    main.mor_sk AS mor_id,\\n    main.region_sk AS prov_id,\\n    main.district_sk AS district_id,\\n    mor.mor_short AS mor_name,\\n    prov.region_name AS prov_name,\\n    INITCAP(dist.district_name) AS district_name,\\n    -- Plant\\n    main.plant_sk AS plant_id,\\n    plant.plant_id AS plant_code,\\n    CONCAT (BTRIM(plant.plant_name), ' - ', plant.plant_id) AS plant_name,\\n    plant.lng AS plant_lng,\\n    plant.lat AS plant_lat,\\n    plant.address AS address,\\n    plant.phone AS phone,\\n    -- Product\\n    main.material_sk AS product_id,\\n    mtrl.material_id AS product_code,\\n    mtrl.material_name AS product_name,\\n    -- Daily\\n    d_sale,\\n    d_targ,\\n    COALESCE(100 * d_sale / NULLIF (d_targ, 0), 0) :: int d_perf\\n  FROM main\\n  LEFT JOIN mtrl ON main.material_sk = mtrl.material_sk\\n  LEFT JOIN plant ON main.plant_sk = plant.plant_sk\\n  LEFT JOIN mor ON main.mor_sk = mor.mor_sk\\n  LEFT JOIN prov ON main.region_sk = prov.region_sk\\n  LEFT JOIN dist ON main.district_sk = dist.district_sk\\n),\\npvt_base AS (\\n  SELECT\\n    GROUPING (plant_id) node,\\n    COALESCE (plant_id, 0) as plant_id,\\n    COALESCE(SUM(d_sale), 0) AS d_sale,\\n    COALESCE(SUM(d_targ), 0) AS d_targ\\n  FROM fmain\\n  GROUP BY\\n    ROLLUP (plant_id)\\n  ORDER BY\\n    node DESC,\\n    plant_id DESC\\n),\\npvt AS (\\n  select\\n    array [plant_id] pivot_key,\\n    json_build_object(\\n      'd_sale',\\n      d_sale,\\n      'd_targ',\\n      d_targ,\\n      'd_perf',\\n      COALESCE(100 * d_sale / NULLIF (d_targ, 0), 0) :: int\\n    ) pivot_value\\n  FROM pvt_base\\n),\\nzmain AS (\\n  SELECT\\n    count(*),\\n    json_agg(fmain),\\n    (\\n      select\\n        json_object_agg(d.pivot_key :: text, d.pivot_value)\\n      from (\\n          select\\n            *\\n          from pvt\\n        ) d\\n    ) as pivot\\n  FROM fmain\\n)\\nselect\\n  *\\nfrom zmain\\n\")), mdx(\"h3\", {\n    \"id\": \"postman\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#postman\",\n    \"aria-label\": \"postman permalink\",\n    \"className\": \"icon-heading-class before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"height\": \"20\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"20\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Postman\"), mdx(\"p\", null, \"As Sales Data of each \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Line of Business\"), \" stored into different tables, we were agreed to split them into several endpoints as we put future maintainability into account.\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"../.img/postman.jpg\",\n    \"alt\": \"During the project, Postman was intensively used\"\n  }))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#sales-dashboard","title":"Sales Dashboard","items":[{"url":"#a-tree-view--tree-view","title":"A. Tree View ::: Tree View"},{"url":"#b-map-markers--map-markers","title":"B. Map Markers ::: Map Markers"}]},{"url":"#technical","title":"Technical","items":[{"url":"#complex-sql-query","title":"Complex SQL Query"},{"url":"#postman","title":"Postman"}]}]},"fields":{"dirname":"/home/haliib/dev/gatsby/rinkasan2/data/posts/python"}}},"pageContext":{"slug":"python/rest-api","prev":{"title":"OOP","link":"/python/truck/oop"},"next":{"title":"Odoo","link":"/python/odoo"}}},"staticQueryHashes":["3159585216","4261541374"]}